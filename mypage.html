<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>마이페이지</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="mypage.css">
</head>
<body>
    <header>
        <div class="header-content">
            <h1>My 뮤직</h1>
            <p class="highlight-text">작업 시간이 힘들고 괴롭다면? 이제는 음악과 함께해요.</p>
        </div>
    </header>

    <nav>
        <ul>
            <li><a href="index.html">홈</a></li>
            <li><a href="#">플레이리스트</a></li>
            <li><a href="#">작업시간 체크</a></li>
            <li class="active"><a href="mypage.html" class="active">My 뮤직</a></li>
        </ul>
    </nav>

    <div class="container">
        <aside>
            <form id="userInfoForm"> 
                
                <h3>내 정보 설정</h3>
                <div class="user-info-box">
                    
                    <div class="info-item">
                        <label for="nickname">닉네임</label>
                        <input type="text" id="nickname" name="nickname" value="음악과함께하는개발자" required>
                    </div>
                    
                    <div class="info-item">
                        <label for="job">직업/분야</label>
                        <input type="text" id="job" name="job" value="IT 개발자" required>
                    </div>
                    
                    <div class="info-item">
                        <label for="workStyle">작업 스타일</label>
                        <input type="text" id="workStyle" name="workStyle" value="밤샘 작업 선호" required>
                    </div>
                </div>

                <h3 class="second-header">취향 탐색 입력</h3>
                <div class="user-info-box">
                    <div class="info-item">
                        <label for="genre">좋아하는 장르</label>
                        <input type="text" id="genre" name="genre" value="로파이, 재즈" required>
                    </div>
                    
                    <div class="info-item">
                        <label for="artistSelect">취향 가수</label>
                        <input type="text" id="artistSelect" name="artistSelect" value="Taylor Swift, IU" required>
                    </div>
                </div>
                
                <button type="submit" id="saveButton">설정 저장</button>

            </form>
        </aside>

        <main>
            <h2>나를 위한 플레이리스트</h2> 
            
            <div class="horizontal-scroll-container">
                <div class="playlist-grid">

                    <div class="playlist-item">
                        <div class="album-cover-placeholder"></div>
                        <div class="playlist-text">
                            <h3>밤샘 작업 플레이리스트</h3>
                            <p>피곤함을 잊게 할 리듬</p>
                        </div>
                    </div>
                    <div class="playlist-item">
                        <div class="album-cover-placeholder"></div>
                        <div class="playlist-text">
                            <h3>스케치용 플레이리스트</h3>
                            <p>창의력을 자극하는 선율</p>
                        </div>
                    </div>
                    <div class="playlist-item">
                        <div class="album-cover-placeholder"></div>
                        <div class="playlist-text">
                            <h3>생각 정리 플레이리스트</h3>
                            <p>집중력을 높이는 명상 음악</p>
                        </div>
                    </div>
                    <div class="playlist-item">
                        <div class="album-cover-placeholder"></div>
                        <div class="playlist-text">
                            <h3>코딩할 때 음악</h3>
                            <p>몰입도를 높이는 백색 소음</p>
                        </div>
                    </div>
                    <div class="playlist-item">
                        <div class="album-cover-placeholder"></div>
                        <div class="playlist-text">
                            <h3>집중력 강화</h3>
                            <p>산만함을 없애는 잔잔한 곡</p>
                        </div>
                    </div>
                    <div class="playlist-item">
                        <div class="album-cover-placeholder"></div>
                        <div class="playlist-text">
                            <h3>휴식 시간</h3>
                            <p>재충전을 위한 편안한 곡</p>
                        </div>
                    </div>
                    <div class="playlist-item">
                        <div class="album-cover-placeholder"></div>
                        <div class="playlist-text">
                            <h3>감성 폭발 시티팝</h3>
                            <p>경쾌하고 중독성 있는 멜로디</p>
                        </div>
                    </div>
                </div>
            </div>
        </main>
        <main>
            <h2>좋아요</h2> 
            
            <div class="horizontal-scroll-container">
                <div class="playlist-grid">

                    <div class="playlist-item">
                        <div class="album-cover-placeholder"></div>
                        <div class="playlist-text">
                            <h3>집중 작업 플레이리스트</h3>
                            <p>피곤함을 잊게 할 리듬</p>
                        </div>
                    </div>
                    <div class="playlist-item">
                        <div class="album-cover-placeholder"></div>
                        <div class="playlist-text">
                            <h3>노동 플레이리스트</h3>
                            <p>창의력을 자극하는 선율</p>
                        </div>
                    </div>
                    <div class="playlist-item">
                        <div class="album-cover-placeholder"></div>
                        <div class="playlist-text">
                            <h3>생각 정리 플레이리스트</h3>
                            <p>집중력을 높이는 명상 음악</p>
                        </div>
                    </div>
                    <div class="playlist-item">
                        <div class="album-cover-placeholder"></div>
                        <div class="playlist-text">
                            <h3>코딩할 때 음악</h3>
                            <p>몰입도를 높이는 백색 소음</p>
                        </div>
                    </div>
                    <div class="playlist-item">
                        <div class="album-cover-placeholder"></div>
                        <div class="playlist-text">
                            <h3>집중력 강화</h3>
                            <p>산만함을 없애는 잔잔한 곡</p>
                        </div>
                    </div>
                    <div class="playlist-item">
                        <div class="album-cover-placeholder"></div>
                        <div class="playlist-text">
                            <h3>휴식 시간</h3>
                            <p>재충전을 위한 편안한 곡</p>
                        </div>
                    </div>
                    <div class="playlist-item">
                        <div class="album-cover-placeholder"></div>
                        <div class="playlist-text">
                            <h3>감성 폭발 시티팝</h3>
                            <p>경쾌하고 중독성 있는 멜로디</p>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <footer>
        <p>&copy; 2025 Music for Work. All rights reserved.</p>
    </footer>
    <script>
       const WEB_APP_URL = "https://script.google.com/macros/s/AKfycbyRqIwG5kFRLfdXD9TndJFolb4qvkopgDgsJrM_8jp3Z2r-yWxMfY8DaqlPIHe55q6ajA/exec";

        document.getElementById('userInfoForm').addEventListener('submit', function(event) {
            event.preventDefault(); // 기본 폼 제출 방지

            const form = event.target;
            const formData = new FormData(form);
            const data = {};

            // 폼 데이터를 일반 객체로 변환
            formData.forEach((value, key) => {
                data[key] = value;
            });

            const saveButton = document.getElementById('saveButton');
            saveButton.textContent = '저장 중...';
            saveButton.disabled = true;

            // Apps Script 웹 앱으로 POST 요청 전송
            fetch(WEB_APP_URL, {
                method: 'POST',
                mode: 'no-cors', 
                headers: {
                    'Content-Type': 'application/x-www-form-urlencoded',
                },
                body: new URLSearchParams(data) 
            })
            .then(() => {
                // no-cors 모드에서는 실제 응답을 읽지는 못하지만, 전송 성공으로 간주
                alert("✅ 설정이 성공적으로 저장되었습니다!");
            })
            .catch(error => {
                console.error('Error:', error);
                alert("❌ 설정 저장 중 오류가 발생했습니다. 콘솔을 확인하세요.");
            })
            .finally(() => {
                saveButton.textContent = '설정 저장';
                saveButton.disabled = false;
            });
        });
    </script>
</body>

</html>
